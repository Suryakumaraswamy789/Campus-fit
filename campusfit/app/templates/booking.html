<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>My Bookings - CampusFit</title>
<style>body{margin:0;font-family:Arial,sans-serif;background:#f4f7f9;} header{background:#2c3e50;color:#fff;padding:16px;text-align:center;} header a{color:#fff;text-decoration:none;font-weight:700;margin:0 15px;} .wrap{max-width:800px;margin:24px auto;padding:16px;} .panel{background:#fff;padding:20px;border-radius:10px;box-shadow:0 6px 20px rgba(10,20,30,.05);margin-bottom:20px;} .panel h3{margin:0 0 15px;border-bottom:1px solid #eee;padding-bottom:10px;color:#333} .session{display:flex;justify-content:space-between;align-items:center;padding:14px 0;border-bottom:1px solid #f1f4f7} .session:last-child{border-bottom:none;} .btn-award{padding:8px 12px;border:0;border-radius:8px;background:#4facfe;color:#fff;font-weight:700;cursor:pointer;transition:background .2s} .btn-award:hover{background:#3a7bd5} select{padding:8px;border-radius:6px;border:1px solid #ccc}
</style>
</head>
<body>
  <header>
      <a href="{% if user.role == 'learner' %}{% url 'learner_dash' %}{% else %}{% url 'mentor_dash' %}{% endif %}">Dashboard</a>
      <a href="{% url 'logout' %}">Logout</a>
  </header>
  <div class="wrap">
      <div class="panel">
          <h3>Upcoming Sessions</h3>
          {% for session in upcoming_sessions %}
              <div class="session">
                  <div>
                      <strong>{{ session.session_date|date:"d M Y, h:i A" }}</strong><br>
                      <small style="color:#555">With: {% if user_role == 'learner' %}{{ session.mentor.user.full_name }}{% else %}{{ session.learner.user.full_name }}{% endif %}</small>
                  </div>
                  <div style="font-weight:bold;color:#27ae60;">{{ session.status|title }}</div>
              </div>
          {% empty %}
              <p>You have no upcoming sessions.</p>
          {% endfor %}
      </div>
      <div class="panel">
          <h3>Completed Sessions</h3>
          {% for session in completed_sessions %}
              <div class="session">
                  <div>
                      <strong>{{ session.session_date|date:"d M Y" }}</strong> with {{ session.mentor.user.full_name }}
                  </div>
                  {% if user_role == 'learner' %}
                    {% if session.points_awarded == 0 %}
                    <form action="{% url 'award_points' session.id %}" method="post">
                        {% csrf_token %}
                        <select name="points">
                            <option value="1">1 pt</option><option value="2">2 pts</option><option value="3">3 pts</option><option value="4">4 pts</option><option value="5">5 pts</option>
                        </select>
                        <button type="submit" class="btn-award">Award</button>
                    </form>
                    {% else %}
                    <div style="font-weight:bold;color:#f39c12">Awarded: {{ session.points_awarded }} Points ★</div>
                    {% endif %}
                  {% else %}
                    <div style="font-weight:bold;color:#f39c12">Points Received: {{ session.points_awarded }} ★</div>
                  {% endif %}
              </div>
          {% empty %}
              <p>You have no completed sessions yet.</p>
          {% endfor %}
      </div>
  </div>
</body>
</html>